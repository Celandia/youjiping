<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/reset.css">
</head>
<!--头部开始-->
<div class="header_container">
    <div class="header_main clear">
        <!--logo-->
        <div class="logo">
            <a href="#" target="_blank"><img src="img/logo.png" alt=""></a>
        </div>
        <!--头部右边-->
        <div class="functional">
            <div class="search_box clear">
                <p>
                    <input type="text" id="search" placeholder="搜索">
                    <span id="search_btn"><img src="img/search.png" alt=""></span>
                </p>
            </div>
            <div class="use_functional clear">
                <ul class="clear">
                    <li class="download_app">
                        <a href="#" title="下载APP"></a>
                        <div><img src="img/app_code.png" alt=""><span></span></div>
                    </li>
                    <li class="shopping_bag">
                        <a href='shoppingcar.html' target='_blank' title='购物袋'></a>
                    </li>
                    <li class="user_center">
                        <!--<a href="login.html" title="个人中心"></a>-->
                        <!--<a href="#" class="overlogin"></a>-->
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--头部菜单-->
<div class="nav_bar_container">
    <div class="nav_bar clear" id="nav_bar">
        <ul class="clear">
            <li class="brand">
                <a class="no" href="index.html">首页</a>
                <p></p>
            </li>
            <li class="brand">
                <a href="#" target="_blank">新品</a>
                <p></p>
            </li>
            <li>
                <a href="#" target="_blank">美味餐厨</a>
                <p></p>
                <ol>
                    <li><a href="#" target="_blank">烹饪锅具</a></li>
                    <li><a href="#" target="_blank">厨房工具</a></li>
                    <li><a href="#" target="_blank">厨房电器</a></li>
                    <li><a href="#" target="_blank">餐具桌面</a></li>
                    <li><a href="#" target="_blank">水具酒具</a></li>
                    <li><a href="#" target="_blank">咖啡茶具</a></li>
                    <li><a href="#" target="_blank">烘焙烧烤</a></li>
                    <li><a href="#" target="_blank">吃货专列</a></li>
                </ol>
            </li>
            <li>
                <a href="#" target="_blank">家纺家饰</a>
                <p></p>
                <ol>
                    <li><a href="#" target="_blank">家纺</a></li>
                    <li><a href="#" target="_blank">装饰</a></li>
                </ol>
            </li>
            <li>
                <a href="#" target="_blank">生活日用</a>
                <p></p>
                <ol>
                    <li><a href="#" target="_blank">清洁</a></li>
                    <li><a href="#" target="_blank">收纳</a></li>
                    <li><a href="#" target="_blank">雨具</a></li>
                    <li><a href="#" target="_blank">浴室</a></li>
                    <li><a href="#" target="_blank">生活电器</a></li>
                    <li><a href="#" target="_blank">颈枕口罩</a></li>
                    <li><a href="#" target="_blank">宠物用品</a></li>
                    <li><a href="#" target="_blank">保暖防护</a></li>
                    <li><a href="#" target="_blank">旅游外出</a></li>
                </ol>
            </li>
            <li>
                <a href="#" target="_blank">健康美体</a>
                <p></p>
                <ol>
                    <li><a href="#" target="_blank">口腔护理</a></li>
                    <li><a href="#" target="_blank">面部护理</a></li>
                    <li><a href="#" target="_blank">全身护理</a></li>
                    <li><a href="#" target="_blank">头发护理</a></li>
                    <li><a href="#" target="_blank">女性护理</a></li>
                    <li><a href="#" target="_blank">纤体塑身</a></li>
                    <li><a href="#" target="_blank">膳食补充</a></li>
                    <li><a href="#" target="_blank">美容彩妆</a></li>
                </ol>
            </li>
            <li>
                <a href="#" target="_blank">文具数码</a>
                <p></p>
                <ol>
                    <li><a href="#" target="_blank">笔记手帐</a></li>
                    <li><a href="#" target="_blank">书写工具</a></li>
                    <li><a href="#" target="_blank">办公收纳</a></li>
                    <li><a href="#" target="_blank">贺卡包装</a></li>
                    <li><a href="#" target="_blank">数码配件</a></li>
                    <li><a href="#" target="_blank">耳机/音箱</a></li>
                    <li><a href="#" target="_blank">摄影相关</a></li>
                </ol>
            </li>
            <li class="brand">
                <a href="#" target="_blank">品牌</a>
                <p></p>
            </li>
        </ul>
        <a href="#" class="contact">联系客服</a>

        <div class="nav_bar_cont" id="nav_bar_cont"></div>
        <p></p>
        <!--<a href="#" class="scroll_shop" id="scroll_shop" target="_blank"></a>-->
        <a href='shoppingcar.html' class='scroll_shop no' id='scroll_shop' target='_blank' title='购物袋'></a>
    </div>
</div>
<!--头部结束-->

<div class="bread">
    <div class="bread_container">
        <a href="index.html">首页</a>
        <i>→</i>
        <a href="#">注册</a>
    </div>
</div>
<!--注册-->
<div class="login_con clear">
    <!--左边图片-->
    <div class="download_app">
        <img src="img/down_app.gif" alt="">
    </div>
    <!--右边注册表单-->
    <div class="login_label">
        <p ><span id="phone_span">请输入正确的手机号</span></p>
        <div class="clear">
            <input type="text" id="phone_num" name="phone_num" placeholder="手机号码">
            <span></span>
        </div>

        <p><span id="pwd_span">密码有6-20个英文字母(区分大小写)或数字组成</span></p>
        <div class="clear">
            <input type="text" id="pwd_num" placeholder="密码">
            <span></span>
        </div>

        <p><span id="tel_span"></span></p>
        <div class="phone_verify_code clear">
            <input type="text" id="phone_verify_code" placeholder="短信验证码">
            <b class="phone_verify_button" >获取验证码</b>
            <span></span>
        </div>

        <p class="image_verify_prompt"><span id="code_span">请输入正确的图形验证码</span></p>
        <div class="image_verify_code clear">
            <input type="text" id="code_value"/>
            <img id="image_verify" src="codeimg/code1.jpg" onclick="this.setAttribute('src','codeimg/code'+Math.round(Math.random()*10)+'.jpg')"/>
            <span></span>
        </div>

        <p class="log_submit"><a href="#" id="register" class="register">注册</a></p>
        <p class="registration_protocol">登录即表示您同意<a href="#" id="registration_protocol">《优集品用户注册协议》</a></p>
        <h3 class="go_login"><a href="login.html" id="hrelogin">账号或第三方登录<img src="img/Page1.png" alt=""></a>
        </h3>
    </div>
</div>
<!--注册结束-->

<!--foot开始-->
<div class="footer_container">
    <div class="footer_main">
        <ul class="footer_help">
            <li><a href="#" class="about_ujp" >关于优集品</a></li>
            <li><a href="#" class="shopping_guide" >购物指南</a></li>
            <li><a href="#" class="notification" >消费者告知书</a></li>
            <li><a href="#" class="common_problem" >常见问题</a></li>
        </ul>
        <div class="website_information">
            <p>
                <span class="first">客服电话 4000-788-738</span>
                <span>优集品© 2011-2016</span>
                <span>北京优集品网络科技有限公司</span>
                <span>京ICP备11028595号 </span>
                <span class="last">京公网安备110105011117</span>
            </p>
            <p style="margin-top: 10px;">
                <span class="first">公司地址：北京市朝阳区华腾世纪总部公园E2座6层601B</span>
                <span>统一社会信用代码：91110105576857306R </span>
                <span class="last">食品经营许可证编码：</span>
            </p>
            <dl class="clear">
                <dt>关注优集品</dt>
                <dd class="weichat"><div id="weichat_div"><img src="img/wechat_code.png" alt=""><span></span></div></dd>
            </dl>
        </div>
    </div>
</div>
<!--foot结束-->
</body>
<script src="js/jquery-1.11.3.js"></script>
<script src="js/cy_head.js"></script>
<script src="js/config.js"></script>
<script>
    $(function () {
        //head的效果
        nav();

        //表单验证
        var num1 = 0;
        var num2 = 0;
        var num3 = 0;
        var num4 = 0;

        //验证手机号
        $("#phone_num").blur(function () {
            var tel = $("#phone_num").val();
            testtel(tel);
        });
        function testtel(tel){
            var reg_tel = /^1[3|5|7|8|9]\d{9}$/;
            if(reg_tel.test(tel)){
                $("#phone_num+span").css("display","block");
                $("#phone_span").css("display","none");
                $("#phone_num").css({"border": "1px solid #BEBDBB"});
                num1 = 1;
                return true;
            }else {
                $("#phone_span").css("display","block");
                $("#phone_num").css({"border": "1px solid rgb(231, 76, 60)"});
                num1 = 0;
                return false;
            }
        }

        //验证密码
        $("#pwd_num").blur(function (){
            var pwd = $("#pwd_num").val();
            ispwd(pwd);
        })
        function ispwd(pwd){
            var reg_pswd = /^[a-z0-9]{6,20}$/;
            if (reg_pswd.test(pwd)) {
                $("#pwd_num+span").css("display","block");
                $("#pwd_span").css("color"," #9B9B9B");
                $("#pwd_span").html("密码有6-20个英文字母(区分大小写)或数字组成");
                $("#pwd_num").css({"border": "1px solid #BEBDBB"});
                num4 = 1;
            } else {
                $("#pwd_span").css("color","#e74c3c");
                $("#pwd_span").html("密码格式不对");
                $("#pwd_num").css({"border": "1px solid rgb(231, 76, 60)"});
                num4 = 0;
            }
        }

        //验证码
        var codeimg = ["tmao","xgqj","p53b","t34o","yvw5","zgke","o2xp","slfg","zgik","u6lm","gykk"];
//        $("#code_value").blur(function () {
//            testcodeimg();
//        });
        function testcodeimg(){
            var str = $("#image_verify").attr("src").split(".")[0];//codeimg/code1
            var index = str.substring(str.length-1,str.length);
            var test = codeimg[index];
            var reg_code = new RegExp(test,"ig");
            if(reg_code.test($("#code_value").val())){
                $("#image_verify+span").css("display","block");
                $("#code_span").css("display","none");
                $("#code_value").css({"border": "1px solid #BEBDBB"});
                return num2 = 1;
            }else {
                $("#code_span").css("display","block");
                $("#code_value").css({"border": "1px solid rgb(231, 76, 60)"});
                $("#image_verify").attr('src','codeimg/code'+Math.round(Math.random()*10)+'.jpg');
                return num2 = 0;
            }
        }

        //发送短信
        $(".phone_verify_button").click(function () {
            var tel = $("#phone_num").val();
            if(testtel(tel)){
                $.ajax({
                    type: "get",
                    url:conf.url + "phpApiDemo/apiDemo/b.php",
                    data: {tel:tel},
                    success: function (result) {
                        var item = JSON.parse(result);
                        if(item.code == 1){
                            $(".phone_verify_button").html("成功发送");
                            $(".phone_verify_button").css({
                                "border": "1px solid #BEBDBB",
                                "color": "#4A4A4A"
                            })
                        }else{
                            $(".phone_verify_button").html("重新发送");
                        }
                    }
                });
            }else{
                $("#phone_span").css("display","block");
                $("#phone_num").css({"border": "1px solid rgb(231, 76, 60)"});
                $(".phone_verify_button").html("重新发送");
                return num1 = 0;
            }
        });

        //短信验证
        $("#phone_verify_code").blur(function () {
            testtelcode();
        });
        function testtelcode(){
            var tel = $("#phone_num").val();
            var code =  $("#phone_verify_code").val();
            var pwd = $("#pwd_num").val();
            $.ajax({
                type: "get",
                url:conf.url + "loginByTel.php",
                data: {tel:tel,code:code,pwd:pwd},
                success: function (result) {
                    var items = JSON.parse(result);
                    if(items.code == 1){
                        $(".phone_verify_button+span").css("display","block");
                        $("#tel_span").css("display","none");
                        return num3 = 1;
                    }if(items.code == 2){
                        $("#phone_num+span").css("display","none");
                        $("#phone_span").css("display","block");
                        $("#phone_num").css({"border": "1px solid rgb(231, 76, 60)"});
                        $("#phone_span").html("该手机号已经注册了");
                        return num3 = 0;
                    }else{
                        $("#phone_verify_code").css({"border": "1px solid rgb(231, 76, 60)"});
                        $("#tel_span").css("display","block");
                        $("#tel_span").html("验证码错误");
                        return num3 = 0;
                    }
                }
            });
        }

        $("#register").click(function () {
            testcodeimg();
            var tel = $("#phone_num").val();
//            testtel(tel);
//            var pwd = $("#pwd_num").val();
//            ispwd(pwd);
//            testcodeimg();
//            testtelcode();
            var addnum = num1 + num2 + num3 + num4;
            if(addnum == 4) {
                $("#register").attr("href", "index.html");
            }
        });


    })

</script>
</html>
